<!DOCTYPE html> 
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh s√°ch h·ªçc sinh</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            background-image: url('TH 2 gia phu.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .classroom-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 90%;
            max-width: 1200px;
            background: #77b5ee;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-top: 20px;
        }
        .blackboard {
            width: 100%;
            background-color: #2f17e0;
            text-align: center;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .blackboard img {max-width:100%;height:auto;}
        #congratulation-message {
            text-align: center;
            font-size: 24px;
            color: black;
            font-weight: normal;
            margin: 10px 0 20px 0;
            min-height: 36px;
            transition: opacity 0.5s ease;
            opacity: 0;
        }
        #congratulation-message .student-name {
            color: red;
            font-size: 28px;
            font-weight: bold;
        }
        #congratulation-message.show {opacity:1;}
        .classroom {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            width: 100%;
            margin-bottom: 20px;
        }
        .desk {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ffe4b5;
            border: 2px solid #d2b48c;
            border-radius: 5px;
            padding: 10px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .student {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 14px;
            text-align: center;
            transition: all 0.3s ease;
            width: 45%;
        }
        .student.male {background-color: #b3d9ff;}
        .student.female {background-color: #ffb3d9;}
        .emoji {font-size: 20px;margin-bottom: 5px;}
        .highlight {background-color: yellow !important;transform: scale(1.1);transition: all 0.2s ease;}
        #start-button {
            padding: 10px 30px;
            font-size: 24px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #start-button:hover {background-color:#45a049;}
        #start-button:disabled {background-color:#ccc;cursor:not-allowed;}
        body::before {
            content:'';
            position:fixed;top:0;left:0;width:100%;height:100%;
            background-color:rgba(0,0,0,0.3);
            z-index:-1;
        }
        #start-button:active {transform:scale(0.95);box-shadow:none;}
    </style>
</head>
<body>
<div class="classroom-container">
    <div class="blackboard">
        <img src="tieu de game.png" alt="Welcome to the Classroom">
    </div>
    <div id="congratulation-message"></div>
    <div class="classroom" id="classroom"></div>
    <button id="start-button">B·∫Øt ƒë·∫ßu</button>
</div>

<audio id="waiting-sound" loop>
    <source src="waiting-sound.mp3" type="audio/mpeg">
</audio>
<audio id="finish-sound">
    <source src="finish-sound.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>

<script>
const students = [
    'N√¥ng Tu·ªá An','L∆∞∆°ng Ng·ªçc Anh','Nguy·ªÖn H·∫£i Anh','Nguy·ªÖn L√™ Tr√¢m Anh','Nguy·ªÖn Ng·ªçc Anh',
    'Ph·∫°m Qu·ª≥nh Anh','Phan Huy·ªÅn Anh','V≈© Ho√†i B·∫£o Anh','V≈© Ho√†ng B√°ch','ƒê·∫∑ng Ng·ªçc B√≠ch',
    'B√πi Minh ƒê·∫°t','Ho√†ng Tr∆∞·ªùng Giang','ƒêo√†n Nguy√™n Giao','Ph·∫°m Ng·ªçc H·∫£i','Ho√†ng Qu·ª≥nh H∆∞∆°ng',
    'Nguy·ªÖn Minh Khang','ƒê·ªó Minh Kh√¥i','Tr·∫ßn ƒêƒÉng Kh√¥i','ƒêinh Tu·ªá Minh','V≈© Quang Minh',
    'B√πi T√¥ Th·∫£o My','V∆∞∆°ng Tr√† My','Nguy·ªÖn Kh√°nh Ng√¢n','Phi Kh√°nh Ng√¢n','Nguy·ªÖn Kh√¥i Nguy√™n',
    'D∆∞∆°ng Huy·ªÅn Nhi','L√™ Ch√¢n Phong','V≈© ƒê√¨nh Phong','Nguy·ªÖn Vi·ªát Quang','Mai Thanh T√¢m',
    'Nguy·ªÖn ƒê√¨nh Thi·ªán','ƒê√†o Anh Th∆∞','ƒê·ªó Anh Ti·ªÅn','Ho√†ng Thu Tr√¢m','L√™ Thanh Tr√∫c',
    'Nguy·ªÖn S∆°n T√πng'
];
const genderIndicators = {
    male: ['vƒÉn','qu·ªëc','ƒë·ª©c','minh','quang','m·∫°nh','thanh','xu√¢n','h·∫£i','ti·∫øn','th√°i','ph√∫c','ho√†ng','ƒëƒÉng','nam','ph√°t','h√πng','d≈©ng','t√πng','to√†n','c∆∞·ªùng','tu·∫•n','√¢n','nh·ª±t'],
    female: ['th·ªã','ng·ªçc','thu','h·ªìng','lan','qu·ª≥nh','b√≠ch','mai','h·∫°nh','trang','vy','nhung','y·∫øn','h∆∞∆°ng','anh','linh','my','tr√¢m','chi']
};
let selectedStudent=null,isSelecting=false;
const waitingSound=document.getElementById('waiting-sound');
const finishSound=document.getElementById('finish-sound');
const startButton=document.getElementById('start-button');

waitingSound.volume=0.5; finishSound.volume=0.7; waitingSound.loop=true;

function detectGender(name){
    name=name.toLowerCase();
    for(let f of genderIndicators.female){if(name.includes(f)) return 'female';}
    for(let m of genderIndicators.male){if(name.includes(m)) return 'male';}
    return 'male';
}

function createClassroom(){
    const classroom=document.getElementById('classroom');
    classroom.innerHTML='';
    for(let i=0;i<students.length;i+=2){
        const desk=document.createElement('div');
        desk.className='desk';
        const student1=document.createElement('div');
        const g1=detectGender(students[i]);
        student1.className=`student ${g1}`;
        student1.innerHTML=`<div class='emoji'>üôç‚Äç${g1==='male'?'‚ôÇÔ∏è':'‚ôÄÔ∏è'}</div><div class='student-name-container'>${students[i]}</div>`;
        desk.appendChild(student1);
        if(students[i+1]){
            const student2=document.createElement('div');
            const g2=detectGender(students[i+1]);
            student2.className=`student ${g2}`;
            student2.innerHTML=`<div class='emoji'>üôç‚Äç${g2==='male'?'‚ôÇÔ∏è':'‚ôÄÔ∏è'}</div><div class='student-name-container'>${students[i+1]}</div>`;
            desk.appendChild(student2);
        }
        classroom.appendChild(desk);
    }
}

function randomHighlight(){
    const s=document.querySelectorAll('.student');
    s.forEach(st=>st.classList.remove('highlight'));
    const r=Math.floor(Math.random()*s.length);
    s[r].classList.add('highlight');
    return s[r];
}
function resetPreviousSelection(){
    if(selectedStudent){
        selectedStudent.style.color='';
        selectedStudent.style.fontSize='';
        selectedStudent.classList.remove('highlight');
    }
    document.getElementById('congratulation-message').classList.remove('show');
}
function showCongratulations(){
    const msg=document.getElementById('congratulation-message');
    const name=selectedStudent.querySelector('.student-name-container').textContent.trim();
    msg.innerHTML=`Ch√∫c m·ª´ng b·∫°n <span class="student-name">${name}</span> l√† ng∆∞·ªùi may m·∫Øn ƒë∆∞·ª£c ch·ªçn!`;
    msg.classList.add('show');
}
function startConfetti(){
    for(let i=0;i<3;i++){
        setTimeout(()=>{confetti({particleCount:100,spread:70,origin:{y:0.6}});},i*500);
    }
}
function startSelection(){
    if(isSelecting) return;
    isSelecting=true; resetPreviousSelection(); startButton.disabled=true;
    waitingSound.currentTime=0;
    waitingSound.play().catch(()=>{}); // c√≥ th·ªÉ b·ªã ch·∫∑n l·∫ßn ƒë·∫ßu
    const interval=setInterval(()=>{selectedStudent=randomHighlight();},60);
    setTimeout(()=>{
        clearInterval(interval);
        isSelecting=false;
        selectedStudent.style.fontSize='16px';
        selectedStudent.style.color='red';
        waitingSound.pause(); waitingSound.currentTime=0;
        finishSound.currentTime=0;
        finishSound.play().catch(()=>{});
        startConfetti(); showCongratulations(); startButton.disabled=false;
    },5000);
}

startButton.addEventListener('click',startSelection);
createClassroom();

// üöÄ T·ª± ƒë·ªông ch·∫°y sau khi trang t·∫£i
window.addEventListener('load',()=>{setTimeout(startSelection,1000);});

// ‚úÖ B·ªï sung: K√≠ch ho·∫°t √¢m thanh sau l·∫ßn click ƒë·∫ßu ti√™n
document.addEventListener('click',()=>{
    waitingSound.play().then(()=>waitingSound.pause()).catch(()=>{});
    finishSound.play().then(()=>finishSound.pause()).catch(()=>{});
},{once:true});
</script>
</body>
</html>
